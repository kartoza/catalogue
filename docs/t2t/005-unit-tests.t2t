

%---------------------------------

== Running unit tests ==

A settings file for tests is available as `settings_test.py` this settings
use the faster spatialite instead of createdb.

**Note** You must enable the virtual environment first:

```
source ../python/bin/activate
```

=== Running unit tests using SQLITE backend ===

Before you can run the tests, you need to make sure you have pysqlite installed:

```
pip install pysqlite
```

It should have been installed during the system setup process already.


Run tests for catalogue app as:

```
  $ python manage.py test catalogue --settings=settings_test
```

=== Running Unit tests using Postgresql ===

Alternatively you can use postgresql as the test database backend. Before you
can run the tests you should create a template database and set some
permissions on it:

```
createdb template_postgis
psql template_postgis
GRANT ALL ON geometry_columns TO PUBLIC;
GRANT ALL ON spatial_ref_sys TO PUBLIC;
\q
```

Now you can run the tests without the settings_test option and they will be
executed against an autogenerated PostgreSQL database backend.

```
python manage.py test catalogue
```
