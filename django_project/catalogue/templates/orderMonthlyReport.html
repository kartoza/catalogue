{% extends "base.html" %}
{% load url from future %} {# https://docs.djangoproject.com/en/1.4/releases/1.3/#changes-to-url-and-ssi #}
{% load boxtag %} {# Custom tag defined in templatetags/ #}
{# page wrapped version of add.html for non ajax graceful degradation #}
{% block content %}
  {% box_start "box-orders-list" %}
  <script type="text/javascript">
      function showOrder(theId) {
        theUrl = '/vieworder/' + theId + '/';
        $('#content').load(theUrl,'', zebraTables );
      };
  </script>


<div id="monthSelector" class="span-22 last">
  <div class="span-8">
    <button onclick='location="{% url 'orderMonthlyReport' myPrevDate|date:'Y' myPrevDate|date:'m' %}"'>Previous month</button>
  </div>
  <div class="span-6 centered">
    <button onclick='location="?pdf"'><img src="/media/images/application-pdf.png" /> PDF</button>
  </div>
  <div class="span-8 last" style="text-align: right;">
    <button onclick='location="{% url 'orderMonthlyReport' myNextDate|date:'Y' myNextDate|date:'m' %}"'>Next month</button>
  </div>
</div>




{% if myRecords %}
  <h2 class="chartTitle centered">Order list for {{ myCurrentDate|date:'M, Y' }}</h2>
  <table>
    <thead>
    </thead>
    <tbody>
      <tr>
        <th>Id</th>
        <th>Date</th>
        <th>Status</th>
        <th>Placed by</th>
        <th>View</th>
      </tr>
    {% for myOrder in myRecords %}
      <tr>
        <td>{{myOrder.id }}</td>
        <td>{{myOrder.order_date|date:"D, d M Y, H:m" }}</td>
        <td>{{myOrder.order_status}}</td>
        <td>{{myOrder.user.get_profile.firstname}} {{myOrder.user.get_profile.surname}}</td>
        <td>
          <img src="/media/images/search_16.png" 
               style="cursor: pointer;"
               onclick='
               $("#content").load("/vieworder/{{myOrder.id}}/","", zebraTables );
               return false;' 
           / >
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
{% else %}
<p>No reports to generate.</p> 
{% endif %}
  {% box_end %}
{% endblock %}
