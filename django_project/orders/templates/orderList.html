{% load render_table from django_tables2 %}
<script type="text/javascript">
function showOrder(theId) {
  var theUrl = '/listorders/?order_id=' + theId + ' #list-order-table';
  $('#list-order-table').load(theUrl);
}
</script>
{% block content %}
<div class="row-fluid">
  <h2>Orders List</h2>
</div>
<div class="row-fluid center">
  <form name="frmShowOrder" method="get" action="" class="form-horizontal">
    <fieldset>
      <label for="order_id_text">Search orders:</label>
      <div class="input-append">
        <input name="order_id_text" type="text" size="6" maxlength="5" placeholder="Enter Order ID"/>
        <button class="btn btn-success"
                onclick="showOrder(forms['frmShowOrder'].order_id_text.value); return false;">
          Go!
        </button>
      </div>
    </fieldset>
  </form>
</div>
<div class="row-fluid center gap-bottom">
  <div id="order-list-buttonset" class="btn-group">
    <button id="download-btn" class="btn"
            onclick='location="{{ myUrl }}?page={{ myRecords.number}}&pdf"'>
      <i class="icon-download"></i> Download as PDF
    </button>
    {% if myUrl == '/listorders/' %} {# can't use url template tag for if evaluation #}
    <button class="btn monthly-btn"
            onclick='location="{% url 'orderMonthlyReport' myCurrentMonth|date:'Y'  myCurrentMonth|date:'m' %}"'>
      <i class="icon-calendar"></i> View Monthly Reports
    </button>
    <button class="btn summary-btn"
            onclick='location="{% url 'ordersSummary' %}"'>
      <i class="icon-tasks"></i> View Orders Summary
    </button>
    {% endif %}
  </div>
</div>
{% if table %}
  <div class="row-fluid" id="list-order-table">
    {% render_table table 'django_tables2/custom-table.html' %}
  </div>
{% else %}
  <div class="row-fluid text-center" id="list-order-table">
    <p class="lead">
      No Report to Generate
    </p>
  </div>
{% endif %}
<script>
$('.monthly-btn').tooltip({
  placement:'top',
  title:'Monthly Orders'
});
$('.summary-btn').tooltip({
  placement:'top',
  title:'Orders Summary'
});
</script>
{% endblock %}
