{% extends 'base.html' %}
{# Original code from Tim's SABIO project and copyright is retained by the original author #}
{% block content %}
  <h2 class="centered"> My Search History</h2>
  <div class="row-fluid">
  <table width="100%" class="table table-striped">
    <tr>
      <th>
        <b>Searched on</b>
      </th>
      <th>
        <b>Sensor(s)</b>
      </th>
      <th>
        <b>Date ranges</b>
      </th>
      <th>
        <b>Results</b>
      </th>
      <th>
        <b>View</b>
      </th>
      <th>
      </th>
    </tr>
    {% for mySearch in mySearches %}
    <tr>
      <td>
        {{ mySearch.search_date|date:"jS F Y" }}
      </td>
      <td>
        {{ mySearch.sensorsAsString }}
      </td>
      <td>
        {{ mySearch.datesAsString }}
      </td>
      <td>
        {% firstof mySearch.record_count 'N/D' %}
      </td>
      <td>
        <a href="{% url 'searchGuid' mySearch.guid %}"><i class="icon-search"></i></a>{# blocking link class used to trap clicks and show block ui while page redirect runs #}
      </td>
      <td>
        <a href="{% url 'deleteSearch' mySearch.id %}"
          onclick='
          $.get("{% url 'deleteSearch' mySearch.id %}?xhr");
          $(this).parent().parent().remove();
          return false;'
          >
          <i class="icon-remove"></i>
          </a>
      </td>
    </tr>
    {% endfor %}
  </table>
</div>
{% endblock %}
