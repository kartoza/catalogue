{# included in search.html or pulled in by ajax #}
{% load url from future %} {# https://docs.djangoproject.com/en/1.4/releases/1.3/#changes-to-url-and-ssi #}
{% load crispy_forms_tags %}

{% crispy myForm %}
<button onClick="submitSearchForm();" class="btn btn-success" class="default" name="_search" title="Click here to execute your search.">Search</button>
{{myForm.media}}
<script>
    function check_sensor_inclination_angles() {
        var sv = parseInt($("#id_sensor_inclination_angle_start").val());
        var ev = parseInt($("#id_sensor_inclination_angle_end").val());
        if (sv && ev && (sv > ev)) {
            alert ("The sensor inclination angle start value is greater than the end.");
        };
    };

    function submitSearchForm(){
      check_search_dates();
      if (datesOk){
        $.post('/search/', $("#search_form").serializeArray(), function(data) {
            loadSearchResults( 1, data.guid )
          //$('#search-results-container').load('/rendersearchresultspage/' + data.guid +'/');
        });
        //$('#search-results-container').load('/search/', $("#search_form").serializeArray());
        //document.forms["search_form"].submit();
      } else {
        alert ("The Start Date is later than the End Date.");
      }
    }

    function check_search_dates() {
      var datesOK;
      var sd = $("#id_start_datepicker").val();
      var ed = $("#id_end_datepicker").val();
      if (sd > ed) {
        datesOk=false;
      } else {
        datesOk=true;
      }
    }

    $('#dr_container').sansa_daterangecontainer();
    $('#id_start_datepicker, #id_end_datepicker').datepicker({
      'autoclose':true
    });
</script>