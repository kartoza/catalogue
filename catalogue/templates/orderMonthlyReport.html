{% extends "base.html" %}
{% load boxtag %} {# Custom tag defined in templatetags/ #}
{# page wrapped version of add.html for non ajax graceful degradation #}
{% block content %}
  {% box_start "" "" "orders-list" %}
  <script type="text/javascript">
      function showOrder(theId) {
        theUrl = '/vieworder/' + theId + '/';
        $('#content').load(theUrl,'', zebraTables );
      };
  </script>
  <a href="/ordermonthlyreport/{{ myCurrentDate|date:'Y' }}/{{ myCurrentDate|date:'m' }}/?pdf">PDF</a>
<div id="monthSelector" class="span-22 last">
      <div class="span-3 append-2"><a href="/ordermonthlyreport/{{ myPrevDate|date:'Y' }}/{{  myPrevDate|date:'m' }}/">Previous month</a></div>
<div class="span-4 prepend-3 append-3">{{ myCurrentDate|date:'F Y' }}</div>
      <div class="span-3 prepend-4 last"><a href="/ordermonthlyreport/{{ myNextDate|date:'Y' }}/{{  myNextDate|date:'m' }}/">Next month</a></div>
</div>
{% if myRecords %}
  <h2>Orders List</h2>
  <table>
    <thead>
      <tr>
        <th>Id</th>
        <th>Date</th>
        <th>Status</th>
        <th>Placed by</th>
        <th>View</th>
      </tr>
    </thead>               
    <tbody>
    {% for myOrder in myRecords %}
      <tr>
        <td>{{myOrder.id }}</td>
        <td>{{myOrder.order_date|date:"D, d M Y, H:m" }}</td>
        <td>{{myOrder.order_status}}</td>
        <td>{{myOrder.user}}</td>
        <td>
          <img src="/media/images/search_16.png" 
               style="cursor: pointer;"
               onclick='
               $("#content").load("/vieworder/{{myOrder.id}}/","", zebraTables );
               return false;' 
           / >
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
{% else %}
<p>No reports to generate.</p> 
{% endif %}
  {% box_end %}
<script>
{# //add UI button to monthSelector links #}
  $(document).ready(function(){
  $('#monthSelector a').button();
  });

</script>
{% endblock %}
