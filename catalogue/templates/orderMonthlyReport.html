{% extends "base.html" %}
{% load boxtag %} {# Custom tag defined in templatetags/ #}
{# page wrapped version of add.html for non ajax graceful degradation #}
{% block content %}
  {% box_start "box-orders-list" %}
  <script type="text/javascript">
      function showOrder(theId) {
        theUrl = '/vieworder/' + theId + '/';
        $('#content').load(theUrl,'', zebraTables );
      };
  </script>
  <div>
    <button><a class="button-link" href="/ordermonthlyreport/{{ myCurrentDate|date:'Y' }}/{{ myCurrentDate|date:'m' }}/?pdf"><img src="/media/images/application-pdf.png" />PDF</a></button>
  </div>
<div id="monthSelector" class="span-22 last" style="margin-top:3px;">
  <div class="span-3 append-2">
    <button><a class="button-link" href="/ordermonthlyreport/{{ myPrevDate|date:'Y' }}/{{  myPrevDate|date:'m' }}/">Previous month</a></button>
  </div>
  <div class="span-4 prepend-3 append-3">{{ myCurrentDate|date:'F Y' }}</div>
  <div class="span-3 prepend-4 last">
    <button><a class="button-link" href="/ordermonthlyreport/{{ myNextDate|date:'Y' }}/{{  myNextDate|date:'m' }}/">Next month</a></button>
  </div>
</div>
{% if myRecords %}
  <h2>Orders List</h2>
  <table>
    <thead>
    </thead>
    <tbody>
      <tr>
        <th>Id</th>
        <th>Date</th>
        <th>Status</th>
        <th>Placed by</th>
        <th>View</th>
      </tr>
    {% for myOrder in myRecords %}
      <tr>
        <td>{{myOrder.id }}</td>
        <td>{{myOrder.order_date|date:"D, d M Y, H:m" }}</td>
        <td>{{myOrder.order_status}}</td>
        <td>{{myOrder.user}}</td>
        <td>
          <img src="/media/images/search_16.png" 
               style="cursor: pointer;"
               onclick='
               $("#content").load("/vieworder/{{myOrder.id}}/","", zebraTables );
               return false;' 
           / >
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
{% else %}
<p>No reports to generate.</p> 
{% endif %}
  {% box_end %}
{% endblock %}
